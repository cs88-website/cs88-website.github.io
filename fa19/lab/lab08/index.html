<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content ="CS88: Computational Structures in Data Science" />
    <meta name="keywords" content ="CS88, Computer Science, Data Science, Programming, Berkeley, EECS" />
    <meta name="author" content ="Michael Ball, Amir Shahatit, Alex Kassil, Lyric Yu, Julia Yu, Srinath Goli, Sophia Qin, Brian Mi, Alec Kan, John Yang" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="/fa19/assets/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/fa19/assets/css/style.css">
    <link rel="icon" href="/fa19/assets/images/favicon.ico">
    <link rel="stylesheet" href="/fa19/assets/css/mono-blue.css">

    <link rel="stylesheet" type="text/css" href="/fa19/assets/css/resource.css" />
<link rel="stylesheet" type="text/css" href="/fa19/assets/css/lab.css" />


    <title>Lab 8: Mutation and Lambdas | CS 88 Fall 2019</title>

  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section" aria-label="Toggle Nav Menu" aria-expanded="false">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/fa19/">CS 88</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/fa19/">Calendar</a></li>
            <li><a href="/fa19/articles/resources.html">Resources</a></li>
            <li><a href="/fa19/weekly-schedule.html">Weekly Schedule</a></li>
            <li><a href="/fa19/articles/about.html">Course Information</a></li>
            <li><a href="/fa19/staff.html">Staff</a></li>
            <!--- <li><a href="/fa19/tutoring.html">Tutoring</a></li> -->
          </ul>
        </div>
      </div>
    </nav>

    <div id="content" class="container">
      <div class='row'>
  <div class='col-md-9'>
    <div class='page-header'>
      <h1><span class="content-title-brand">Lab 8</span>: Mutation and Lambdas</h1>
    </div>

    <p><i>Due at 11:59:59 pm on 3/27/2019.</i></p>


<h2 id='starter-files'>Starter Files</h2>

<p>Download <a href="lab08.zip">lab08.zip</a>.
Inside the archive, you will find starter files for the questions in this lab,
  along with a copy of the OK autograder.</p>

<h2 id='submission'>Submission</h2>

<p>By the end of this lab, you should have submitted the lab with <code>python3 ok --submit</code>. You may submit more than once before the deadline; only the final submission will be graded. Check that you have successfully submitted your code on <a href="https://okpy.org">okpy.org</a>. See <a href="https://cs61a.org/articles/using-ok.html">this article</a> for more instructions on okpy and submitting assignments.</p>

    


<h2 id="lambda-review">Lambda Review</h2>


<h3 class="question" id="q1">Question 1: Compose</h3>

<p>Write a function that takes in 2 single-argument functions, f and g, and returns another lambda function 
that takes in a single argument x. The returned function should return the output of applying f(g(x)).</p>

<p>Hint: The staff solution is only 1 line!</p>



<pre><code>def compose(f, g):
    &quot;&quot;&quot;Write a function that takes in 2 single&#x2d;argument functions, f and g, and returns another lambda function 
    that takes in a single argument x. The returned function should return the output of applying f(g(x)). 
    Hint: The staff solution is only 1 line!

    Return the composition function which given x, computes f(g(x)). 

    &gt;&gt;&gt; add_two = lambda x: x + 2  		# adds 2 to x
    &gt;&gt;&gt; square = lambda x: x ** 2 		# squares x
    &gt;&gt;&gt; a = compose(square, add_two) 	# (x + 2 ) ^ 2
    &gt;&gt;&gt; a(5) 
    49
    &gt;&gt;&gt; mul_ten = lambda x: x * 10 		# multiplies 10 with x
    &gt;&gt;&gt; b = compose(mul_ten, a) 		# ((x + 2 ) ^ 2) * 10
    &gt;&gt;&gt; b(5)
    490
    &gt;&gt;&gt; b(2)
    160
    &quot;&quot;&quot;
<div class="alt 1">    "*** YOUR CODE HERE ***"
    
</div><div class="solution 1">&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x6c;&#x61;&#x6d;&#x62;&#x64;&#x61;&#x20;&#x78;&#x3a;&#x20;&#x66;&#x28;&#x67;&#x28;&#x78;&#x29;&#x29;</div></code></pre>


    <button id='1' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q compose</code></pre>

<h3 class="question" id="q2">Question 2: Lambdas and Currying</h3>

<p>We can transform multiple-argument functions into a chain of
single-argument, higher order functions by taking advantage of lambda
expressions. This is useful when dealing with functions that take only
single-argument functions. We will see some examples of these later
on.</p>

<p>Write a function <code>lambda_curry2</code> that will curry any two argument
function using lambdas. See the doctest if you're not sure what this
means.</p>



<pre><code>def lambda_curry2(func):
    &quot;&quot;&quot;
    Returns a Curried version of a two argument function func.
    &gt;&gt;&gt; from operator import add
    &gt;&gt;&gt; x = lambda_curry2(add)
    &gt;&gt;&gt; y = x(3)
    &gt;&gt;&gt; y(5)
    8
    &quot;&quot;&quot;
<div class="alt 2">    "*** YOUR CODE HERE ***"
    
</div><div class="solution 2">&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x6c;&#x61;&#x6d;&#x62;&#x64;&#x61;&#x20;&#x61;&#x72;&#x67;&#x31;&#x3a;&#x20;&#x6c;&#x61;&#x6d;&#x62;&#x64;&#x61;&#x20;&#x61;&#x72;&#x67;&#x32;&#x3a;&#x20;&#x66;&#x75;&#x6e;&#x63;&#x28;&#x61;&#x72;&#x67;&#x31;&#x2c;&#x20;&#x61;&#x72;&#x67;&#x32;&#x29;</div></code></pre>


    <button id='2' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q lambda_curry2</code></pre>


<h2 id="introduction-to-mutation">Introduction to Mutation</h2>


<p>A <em>mutable</em> data structure is any data structure that can be changed after it is created.
You've already dealt with two mutable data structures: lists and dictionaries.</p>

<pre><code>&gt;&gt;&gt; x = [1, 2, 3]
&gt;&gt;&gt; x[0] = 4
&gt;&gt;&gt; x
[4, 2, 3]   # x changed!
&gt;&gt;&gt; d = {&#x27;name&#x27;: &#x27;Rhonda&#x27;, &#x27;age&#x27;: 21, &#x27;major&#x27;: &#x27;Business&#x27;}
&gt;&gt;&gt; d[&#x27;major&#x27;] = &#x27;Data Science&#x27;
&gt;&gt;&gt; d
{&#x27;name&#x27;: &#x27;Rhonda&#x27;, &#x27;age&#x27;: 21, &#x27;major&#x27;: &#x27;Data Science&#x27;}  # Rhonda is an Data Science major now!</code></pre>

<p>Unlike lists or dictionaries, tuples are <em>immutable</em> data structures. This means that once they are created,
they can't be changed. For example, try this:</p>

<pre><code>&gt;&gt;&gt; x = (1, 2, 3)
&gt;&gt;&gt; x[0] = 4</code></pre>

<p>This will cause TypeError complaining that tuples don't "support item
assignment." In other words, you can't change the elements in a tuple
because tuples are immutable. Once a tuple is created, it can't be changed!</p>

<h3 class="question" id="q3">Question 3: Map</h3>

<p>Write a function that maps a function on the given list. Be sure to mutate the
original list.</p>

<blockquote><p>This function should NOT return anything. This is to emphasize that this
function should utilize mutability.</p></blockquote>



<pre><code>def map(fn, lst):
    &quot;&quot;&quot;Maps fn onto lst using mutation.
    &gt;&gt;&gt; original_list = [5, &#x2d;1, 2, 0]
    &gt;&gt;&gt; map(lambda x: x * x, original_list)
    &gt;&gt;&gt; original_list
    [25, 1, 4, 0]
    &quot;&quot;&quot;
<div class="alt 3">    "*** YOUR CODE HERE ***"
</div><div class="solution 3">&#x20;&#x20;&#x20;&#x20;&#x23;&#x20;&#x49;&#x74;&#x65;&#x72;&#x61;&#x74;&#x69;&#x76;&#x65;&#x20;&#x73;&#x6f;&#x6c;&#x75;&#x74;&#x69;&#x6f;&#x6e;&#xa;&#x20;&#x20;&#x20;&#x20;&#x66;&#x6f;&#x72;&#x20;&#x69;&#x20;&#x69;&#x6e;&#x20;&#x72;&#x61;&#x6e;&#x67;&#x65;&#x28;&#x6c;&#x65;&#x6e;&#x28;&#x6c;&#x73;&#x74;&#x29;&#x29;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x6c;&#x73;&#x74;&#x5b;&#x69;&#x5d;&#x20;&#x3d;&#x20;&#x66;&#x6e;&#x28;&#x6c;&#x73;&#x74;&#x5b;&#x69;&#x5d;&#x29;&#xa;&#xa;&#x23;&#x20;&#x52;&#x65;&#x63;&#x75;&#x72;&#x73;&#x69;&#x76;&#x65;&#x20;&#x73;&#x6f;&#x6c;&#x75;&#x74;&#x69;&#x6f;&#x6e;&#xa;&#x64;&#x65;&#x66;&#x20;&#x6d;&#x61;&#x70;&#x28;&#x66;&#x6e;&#x2c;&#x20;&#x6c;&#x73;&#x74;&#x29;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x22;&#x22;&#x22;&#x4d;&#x61;&#x70;&#x73;&#x20;&#x66;&#x6e;&#x20;&#x6f;&#x6e;&#x74;&#x6f;&#x20;&#x6c;&#x73;&#x74;&#x20;&#x75;&#x73;&#x69;&#x6e;&#x67;&#x20;&#x6d;&#x75;&#x74;&#x61;&#x74;&#x69;&#x6f;&#x6e;&#x2e;&#xa;&#x20;&#x20;&#x20;&#x20;&#x3e;&#x3e;&#x3e;&#x20;&#x6f;&#x72;&#x69;&#x67;&#x69;&#x6e;&#x61;&#x6c;&#x5f;&#x6c;&#x69;&#x73;&#x74;&#x20;&#x3d;&#x20;&#x5b;&#x35;&#x2c;&#x20;&#x2d;&#x31;&#x2c;&#x20;&#x32;&#x2c;&#x20;&#x30;&#x5d;&#xa;&#x20;&#x20;&#x20;&#x20;&#x3e;&#x3e;&#x3e;&#x20;&#x6d;&#x61;&#x70;&#x28;&#x6c;&#x61;&#x6d;&#x62;&#x64;&#x61;&#x20;&#x78;&#x3a;&#x20;&#x78;&#x20;&#x2a;&#x20;&#x78;&#x2c;&#x20;&#x6f;&#x72;&#x69;&#x67;&#x69;&#x6e;&#x61;&#x6c;&#x5f;&#x6c;&#x69;&#x73;&#x74;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x3e;&#x3e;&#x3e;&#x20;&#x6f;&#x72;&#x69;&#x67;&#x69;&#x6e;&#x61;&#x6c;&#x5f;&#x6c;&#x69;&#x73;&#x74;&#xa;&#x20;&#x20;&#x20;&#x20;&#x5b;&#x32;&#x35;&#x2c;&#x20;&#x31;&#x2c;&#x20;&#x34;&#x2c;&#x20;&#x30;&#x5d;&#xa;&#x20;&#x20;&#x20;&#x20;&#x22;&#x22;&#x22;&#xa;&#x20;&#x20;&#x20;&#x20;&#x69;&#x66;&#x20;&#x6c;&#x73;&#x74;&#x3a;&#x20;&#x20;&#x23;&#x20;&#x54;&#x72;&#x75;&#x65;&#x20;&#x77;&#x68;&#x65;&#x6e;&#x20;&#x6c;&#x73;&#x74;&#x20;&#x21;&#x3d;&#x20;&#x5b;&#x5d;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x74;&#x65;&#x6d;&#x70;&#x20;&#x3d;&#x20;&#x6c;&#x73;&#x74;&#x2e;&#x70;&#x6f;&#x70;&#x28;&#x30;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x6d;&#x61;&#x70;&#x28;&#x66;&#x6e;&#x2c;&#x20;&#x6c;&#x73;&#x74;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x6c;&#x73;&#x74;&#x2e;&#x69;&#x6e;&#x73;&#x65;&#x72;&#x74;&#x28;&#x30;&#x2c;&#x20;&#x66;&#x6e;&#x28;&#x74;&#x65;&#x6d;&#x70;&#x29;&#x29;</div></code></pre>


    <button id='3' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q map</code></pre>

<h3 class="question" id="q4">Question 4: reverse-todo</h3>
During the mini lecture, you saw a to-do list ADT that returns a function that adds items to the list.

<p>Say our priorities change and we want to reverse the order of the list!</p>

<p>Rewrite the constructor so that it also returns another function that reverses the todo list. Be sure to mutate the original list!</p>

<blockquote><p>This function should NOT return anything. This is to emphasize that this
function should utilize mutability.</p></blockquote>



<pre><code>def todo():
    &quot;&quot;&quot;Returns add and reverse, which add to and reverse the list
    &gt;&gt;&gt; add, get_list, reverse = todo()
    &gt;&gt;&gt; add(&quot;clean&quot;)
    &gt;&gt;&gt; add(&quot;homework&quot;)
    &gt;&gt;&gt; add(&quot;cook&quot;)
    &gt;&gt;&gt; add(&quot;sleep&quot;)
    &gt;&gt;&gt; get_list()
    [&#x27;clean&#x27;, &#x27;homework&#x27;, &#x27;cook&#x27;, &#x27;sleep&#x27;]
    &gt;&gt;&gt; reverse()
    &gt;&gt;&gt; get_list()
    [&#x27;sleep&#x27;, &#x27;cook&#x27;, &#x27;homework&#x27;, &#x27;clean&#x27;]
    &gt;&gt;&gt; add(&quot;wake up&quot;)
    &gt;&gt;&gt; get_list()
    [&#x27;sleep&#x27;, &#x27;cook&#x27;, &#x27;homework&#x27;, &#x27;clean&#x27;, &#x27;wake up&#x27;]
    &gt;&gt;&gt; reverse()
    &gt;&gt;&gt; get_list()
    [&#x27;wake up&#x27;, &#x27;clean&#x27;, &#x27;homework&#x27;, &#x27;cook&#x27;, &#x27;sleep&#x27;]
    &quot;&quot;&quot;
    lst = []
    def get_list():
        return lst
    def add(item):
        lst.append(item)
    def reverse():
<div class="alt 4">        "*** YOUR CODE HERE ***"
        
</div><div class="solution 4">&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x23;&#x20;&#x69;&#x74;&#x65;&#x72;&#x61;&#x74;&#x69;&#x76;&#x65;&#x20;&#x73;&#x6f;&#x6c;&#x75;&#x74;&#x69;&#x6f;&#x6e;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x6d;&#x69;&#x64;&#x70;&#x6f;&#x69;&#x6e;&#x74;&#x20;&#x3d;&#x20;&#x6c;&#x65;&#x6e;&#x28;&#x6c;&#x73;&#x74;&#x29;&#x20;&#x2f;&#x2f;&#x20;&#x32;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x6c;&#x61;&#x73;&#x74;&#x20;&#x3d;&#x20;&#x6c;&#x65;&#x6e;&#x28;&#x6c;&#x73;&#x74;&#x29;&#x20;&#x2d;&#x20;&#x31;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x66;&#x6f;&#x72;&#x20;&#x69;&#x20;&#x69;&#x6e;&#x20;&#x72;&#x61;&#x6e;&#x67;&#x65;&#x28;&#x6d;&#x69;&#x64;&#x70;&#x6f;&#x69;&#x6e;&#x74;&#x29;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x6c;&#x73;&#x74;&#x5b;&#x69;&#x5d;&#x2c;&#x20;&#x6c;&#x73;&#x74;&#x5b;&#x6c;&#x61;&#x73;&#x74;&#x20;&#x2d;&#x20;&#x69;&#x5d;&#x20;&#x3d;&#x20;&#x6c;&#x73;&#x74;&#x5b;&#x6c;&#x61;&#x73;&#x74;&#x20;&#x2d;&#x20;&#x69;&#x5d;&#x2c;&#x20;&#x6c;&#x73;&#x74;&#x5b;&#x69;&#x5d;&#xa;&#x20;&#x20;&#x20;&#x20;&#x23;&#x20;&#x52;&#x65;&#x63;&#x75;&#x72;&#x73;&#x69;&#x76;&#x65;&#x20;&#x73;&#x6f;&#x6c;&#x75;&#x74;&#x69;&#x6f;&#x6e;&#xa;&#x20;&#x20;&#x20;&#x20;&#x64;&#x65;&#x66;&#x20;&#x72;&#x65;&#x76;&#x65;&#x72;&#x73;&#x65;&#x28;&#x6c;&#x73;&#x74;&#x29;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x22;&#x22;&#x22;&#x52;&#x65;&#x76;&#x65;&#x72;&#x73;&#x65;&#x73;&#x20;&#x6c;&#x73;&#x74;&#x20;&#x75;&#x73;&#x69;&#x6e;&#x67;&#x20;&#x6d;&#x75;&#x74;&#x61;&#x74;&#x69;&#x6f;&#x6e;&#x2e;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x3e;&#x3e;&#x3e;&#x20;&#x6f;&#x72;&#x69;&#x67;&#x69;&#x6e;&#x61;&#x6c;&#x5f;&#x6c;&#x69;&#x73;&#x74;&#x20;&#x3d;&#x20;&#x5b;&#x35;&#x2c;&#x20;&#x2d;&#x31;&#x2c;&#x20;&#x32;&#x39;&#x2c;&#x20;&#x30;&#x5d;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x3e;&#x3e;&#x3e;&#x20;&#x72;&#x65;&#x76;&#x65;&#x72;&#x73;&#x65;&#x28;&#x6f;&#x72;&#x69;&#x67;&#x69;&#x6e;&#x61;&#x6c;&#x5f;&#x6c;&#x69;&#x73;&#x74;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x3e;&#x3e;&#x3e;&#x20;&#x6f;&#x72;&#x69;&#x67;&#x69;&#x6e;&#x61;&#x6c;&#x5f;&#x6c;&#x69;&#x73;&#x74;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x5b;&#x30;&#x2c;&#x20;&#x32;&#x39;&#x2c;&#x20;&#x2d;&#x31;&#x2c;&#x20;&#x35;&#x5d;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x22;&#x22;&#x22;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x69;&#x66;&#x20;&#x6c;&#x65;&#x6e;&#x28;&#x6c;&#x73;&#x74;&#x29;&#x20;&#x3e;&#x20;&#x31;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x74;&#x65;&#x6d;&#x70;&#x20;&#x3d;&#x20;&#x6c;&#x73;&#x74;&#x2e;&#x70;&#x6f;&#x70;&#x28;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x76;&#x65;&#x72;&#x73;&#x65;&#x28;&#x6c;&#x73;&#x74;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x6c;&#x73;&#x74;&#x2e;&#x69;&#x6e;&#x73;&#x65;&#x72;&#x74;&#x28;&#x30;&#x2c;&#x20;&#x74;&#x65;&#x6d;&#x70;&#x29;&#xa;&#xa;&#x20;&#x20;&#x20;&#x20;&#x23;&#x20;&#x41;&#x6c;&#x74;&#x65;&#x72;&#x6e;&#x61;&#x74;&#x69;&#x76;&#x65;&#x20;&#x72;&#x65;&#x63;&#x75;&#x72;&#x73;&#x69;&#x76;&#x65;&#x20;&#x73;&#x6f;&#x6c;&#x75;&#x74;&#x69;&#x6f;&#x6e;&#xa;&#x20;&#x20;&#x20;&#x20;&#x64;&#x65;&#x66;&#x20;&#x72;&#x65;&#x76;&#x65;&#x72;&#x73;&#x65;&#x28;&#x6c;&#x73;&#x74;&#x29;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x22;&#x22;&#x22;&#x52;&#x65;&#x76;&#x65;&#x72;&#x73;&#x65;&#x73;&#x20;&#x6c;&#x73;&#x74;&#x20;&#x75;&#x73;&#x69;&#x6e;&#x67;&#x20;&#x6d;&#x75;&#x74;&#x61;&#x74;&#x69;&#x6f;&#x6e;&#x2e;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x3e;&#x3e;&#x3e;&#x20;&#x6f;&#x72;&#x69;&#x67;&#x69;&#x6e;&#x61;&#x6c;&#x5f;&#x6c;&#x69;&#x73;&#x74;&#x20;&#x3d;&#x20;&#x5b;&#x35;&#x2c;&#x20;&#x2d;&#x31;&#x2c;&#x20;&#x32;&#x39;&#x2c;&#x20;&#x30;&#x5d;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x3e;&#x3e;&#x3e;&#x20;&#x72;&#x65;&#x76;&#x65;&#x72;&#x73;&#x65;&#x28;&#x6f;&#x72;&#x69;&#x67;&#x69;&#x6e;&#x61;&#x6c;&#x5f;&#x6c;&#x69;&#x73;&#x74;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x3e;&#x3e;&#x3e;&#x20;&#x6f;&#x72;&#x69;&#x67;&#x69;&#x6e;&#x61;&#x6c;&#x5f;&#x6c;&#x69;&#x73;&#x74;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x5b;&#x30;&#x2c;&#x20;&#x32;&#x39;&#x2c;&#x20;&#x2d;&#x31;&#x2c;&#x20;&#x35;&#x5d;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x22;&#x22;&#x22;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x6d;&#x69;&#x64;&#x70;&#x6f;&#x69;&#x6e;&#x74;&#x20;&#x3d;&#x20;&#x6c;&#x65;&#x6e;&#x28;&#x6c;&#x73;&#x74;&#x29;&#x20;&#x2f;&#x2f;&#x20;&#x32;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x6c;&#x61;&#x73;&#x74;&#x20;&#x3d;&#x20;&#x6c;&#x65;&#x6e;&#x28;&#x6c;&#x73;&#x74;&#x29;&#x20;&#x2d;&#x20;&#x31;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x64;&#x65;&#x66;&#x20;&#x68;&#x65;&#x6c;&#x70;&#x65;&#x72;&#x28;&#x69;&#x29;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x69;&#x66;&#x20;&#x69;&#x20;&#x3d;&#x3d;&#x20;&#x6d;&#x69;&#x64;&#x70;&#x6f;&#x69;&#x6e;&#x74;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x6c;&#x73;&#x74;&#x5b;&#x69;&#x5d;&#x2c;&#x20;&#x6c;&#x73;&#x74;&#x5b;&#x6c;&#x61;&#x73;&#x74;&#x20;&#x2d;&#x20;&#x69;&#x5d;&#x20;&#x3d;&#x20;&#x6c;&#x73;&#x74;&#x5b;&#x6c;&#x61;&#x73;&#x74;&#x20;&#x2d;&#x20;&#x69;&#x5d;&#x2c;&#x20;&#x6c;&#x73;&#x74;&#x5b;&#x69;&#x5d;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x68;&#x65;&#x6c;&#x70;&#x65;&#x72;&#x28;&#x69;&#x20;&#x2b;&#x20;&#x31;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x68;&#x65;&#x6c;&#x70;&#x65;&#x72;&#x28;&#x30;&#x29;</div>    return add, get_list, reverse</code></pre>


    <button id='4' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q todo</code></pre>


<h2 id="mutation-and-adt-s">Mutation and ADT's</h2>


<h3 class="question" id="q5">Question 5: Mailbox</h3>

<p>Mutation is crucial for ADTs. Recall the bank account example given in lecture. The bank account ADT can be deposited to and withdrawn from. When we deposit or withdraw, we want to change the state of the bank account so that the withdrawal or deposit will be reflected next time we access it.</p>

<p>Below, we can see the power of mutability which allows us to change the name and amount of money in <code>account_1</code>.</p>

<pre><code>&gt;&gt;&gt; account_1 = account(&quot;Sophia&quot;, 10)
&gt;&gt;&gt; get_account_name(account_1)
Sophia
&gt;&gt;&gt; change_account_name(account_1, &quot;Julia&quot;)
&gt;&gt;&gt; get_account_name(account_1)
Julia
&gt;&gt;&gt; deposit(account_1, 20)
&gt;&gt;&gt; get_account_savings(account_1)
30
&gt;&gt;&gt; withdraw(account_1, 10)
&gt;&gt;&gt; get_account_savings(account_1)
20</code></pre>

<p>During the mini-lecture, we introduced the new concept of a constructor returning the very functions we want to run on the object! This kind of abstraction is very common in the programming world.</p>

<p>Let's apply this concept to a new ADT: a mailbox. The mail box's internal representation is a dictionary that holds key value pairs corresponding to a person, and a list of their mail. Below is an example of a TA mailbox.</p>

<pre><code>{&quot;Sophia&quot;:[&quot;receipt&quot;, &quot;worksheets&quot;], &quot;Lyric&quot;:[&quot;worksheets&quot;, &quot;form&quot;, &quot;bills&quot;], &quot;Andrew&quot;:[&quot;paycheck&quot;], &quot;Julia&quot;:None, &quot;John&quot;:None, &quot;Amir&quot;:None}</code></pre>

<p>The <code>_get_mail(mailbox, name)</code> function, given a mailbox, should return the mail corresponding to the name argument given. The postman can also put in mail by using the <code>_deliver_mail(mailbox, name, mail)</code> function. You may have noticed that the function names are a bit strange: they each have an underscore in the beginning. We use this kind of syntax when a function is "hidden", meaning they are hidden to the outside. Remember, our goal is for the <code>mailbox</code> constructor to return all functions that the mailbox uses.</p>

<p>Please provide implementations for these functions. Make sure to mutate the dictionary! (You can assume mail will always be in a list.)</p>

<p>After doing that, implement the constructor so that it returns <code>get_mail</code> and <code>deliver_mail</code> such that when called, they will perform the function on the original mailbox. <strong>Hint: use _get_mail and _deliver_mail</strong></p>



<pre><code>def mailbox():
    &quot;&quot;&quot;
    &gt;&gt;&gt; get_mail, deliver_mail = mailbox()
    &gt;&gt;&gt; get_mail(&quot;Sophia&quot;)
    &gt;&gt;&gt; deliver_mail(&quot;Sophia&quot;, [&quot;postcard&quot;])
    &gt;&gt;&gt; get_mail(&quot;Sophia&quot;)
    [&#x27;postcard&#x27;]
    &gt;&gt;&gt; get_mail(&quot;Sophia&quot;)
    &gt;&gt;&gt; deliver_mail(&quot;Lyric&quot;, [&quot;paycheck&quot;, &quot;ads&quot;])
    &gt;&gt;&gt; get_mail(&quot;Lyric&quot;)
    [&#x27;paycheck&#x27;, &#x27;ads&#x27;]
    &gt;&gt;&gt; deliver_mail(&quot;Lyric&quot;, [&quot;bills&quot;])
    &gt;&gt;&gt; get_mail(&quot;Lyric&quot;)
    [&#x27;bills&#x27;]
    &gt;&gt;&gt; deliver_mail(&quot;Julia&quot;, [&quot;survey&quot;])
    &gt;&gt;&gt; get_mail(&quot;Julia&quot;)
    [&#x27;survey&#x27;]
    &gt;&gt;&gt; get_mail(&quot;Julia&quot;)
    &gt;&gt;&gt; get_mail(&quot;Amir&quot;)
    &gt;&gt;&gt; deliver_mail(&quot;Amir&quot;, [&quot;postcard&quot;, &quot;paycheck&quot;])
    &gt;&gt;&gt; deliver_mail(&quot;Amir&quot;, [&quot;ads&quot;])
    &gt;&gt;&gt; get_mail(&quot;Amir&quot;)
    [&#x27;postcard&#x27;, &#x27;paycheck&#x27;, &#x27;ads&#x27;]
    &quot;&quot;&quot;
<div class="alt 5">    "*** YOUR CODE HERE ***"
    
</div><div class="solution 5">&#x20;&#x20;&#x20;&#x20;&#x6d;&#x61;&#x69;&#x6c;&#x62;&#x6f;&#x78;&#x20;&#x3d;&#x20;&#x7b;&#x7d;&#xa;&#x20;&#x20;&#x20;&#x20;&#x64;&#x65;&#x66;&#x20;&#x67;&#x65;&#x74;&#x5f;&#x6d;&#x61;&#x69;&#x6c;&#x28;&#x6e;&#x61;&#x6d;&#x65;&#x29;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x5f;&#x67;&#x65;&#x74;&#x5f;&#x6d;&#x61;&#x69;&#x6c;&#x28;&#x6d;&#x61;&#x69;&#x6c;&#x62;&#x6f;&#x78;&#x2c;&#x20;&#x6e;&#x61;&#x6d;&#x65;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x64;&#x65;&#x66;&#x20;&#x64;&#x65;&#x6c;&#x69;&#x76;&#x65;&#x72;&#x5f;&#x6d;&#x61;&#x69;&#x6c;&#x28;&#x6e;&#x61;&#x6d;&#x65;&#x2c;&#x20;&#x6d;&#x61;&#x69;&#x6c;&#x29;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x5f;&#x64;&#x65;&#x6c;&#x69;&#x76;&#x65;&#x72;&#x5f;&#x6d;&#x61;&#x69;&#x6c;&#x28;&#x6d;&#x61;&#x69;&#x6c;&#x62;&#x6f;&#x78;&#x2c;&#x20;&#x6e;&#x61;&#x6d;&#x65;&#x2c;&#x20;&#x6d;&#x61;&#x69;&#x6c;&#x29;</div>    return get_mail, deliver_mail

def _deliver_mail(mailbox, name, mail):
<div class="alt 5">    "*** YOUR CODE HERE ***"
    
</div><div class="solution 5">&#x20;&#x20;&#x20;&#x20;&#x69;&#x66;&#x20;&#x6c;&#x65;&#x6e;&#x28;&#x6d;&#x61;&#x69;&#x6c;&#x62;&#x6f;&#x78;&#x29;&#x20;&#x3d;&#x3d;&#x20;&#x30;&#x20;&#x6f;&#x72;&#x20;&#x6e;&#x61;&#x6d;&#x65;&#x20;&#x6e;&#x6f;&#x74;&#x20;&#x69;&#x6e;&#x20;&#x6d;&#x61;&#x69;&#x6c;&#x62;&#x6f;&#x78;&#x20;&#x6f;&#x72;&#x20;&#x6d;&#x61;&#x69;&#x6c;&#x62;&#x6f;&#x78;&#x5b;&#x6e;&#x61;&#x6d;&#x65;&#x5d;&#x20;&#x3d;&#x3d;&#x20;&#x4e;&#x6f;&#x6e;&#x65;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x6d;&#x61;&#x69;&#x6c;&#x62;&#x6f;&#x78;&#x5b;&#x6e;&#x61;&#x6d;&#x65;&#x5d;&#x20;&#x3d;&#x20;&#x6d;&#x61;&#x69;&#x6c;&#xa;&#x20;&#x20;&#x20;&#x20;&#x65;&#x6c;&#x73;&#x65;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x6d;&#x61;&#x69;&#x6c;&#x62;&#x6f;&#x78;&#x5b;&#x6e;&#x61;&#x6d;&#x65;&#x5d;&#x20;&#x2b;&#x3d;&#x20;&#x6d;&#x61;&#x69;&#x6c;</div>
def _get_mail(mailbox, name):
<div class="alt 5">    "*** YOUR CODE HERE ***"
    
</div><div class="solution 5">&#x20;&#x20;&#x20;&#x20;&#x69;&#x66;&#x20;&#x6c;&#x65;&#x6e;&#x28;&#x6d;&#x61;&#x69;&#x6c;&#x62;&#x6f;&#x78;&#x29;&#x20;&#x3d;&#x3d;&#x20;&#x30;&#x20;&#x6f;&#x72;&#x20;&#x6e;&#x61;&#x6d;&#x65;&#x20;&#x6e;&#x6f;&#x74;&#x20;&#x69;&#x6e;&#x20;&#x6d;&#x61;&#x69;&#x6c;&#x62;&#x6f;&#x78;&#x20;&#x6f;&#x72;&#x20;&#x6d;&#x61;&#x69;&#x6c;&#x62;&#x6f;&#x78;&#x5b;&#x6e;&#x61;&#x6d;&#x65;&#x5d;&#x20;&#x3d;&#x3d;&#x20;&#x4e;&#x6f;&#x6e;&#x65;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x4e;&#x6f;&#x6e;&#x65;&#xa;&#x20;&#x20;&#x20;&#x20;&#x6d;&#x61;&#x69;&#x6c;&#x20;&#x3d;&#x20;&#x6d;&#x61;&#x69;&#x6c;&#x62;&#x6f;&#x78;&#x5b;&#x6e;&#x61;&#x6d;&#x65;&#x5d;&#xa;&#x20;&#x20;&#x20;&#x20;&#x6d;&#x61;&#x69;&#x6c;&#x62;&#x6f;&#x78;&#x5b;&#x6e;&#x61;&#x6d;&#x65;&#x5d;&#x20;&#x3d;&#x20;&#x4e;&#x6f;&#x6e;&#x65;&#xa;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x6d;&#x61;&#x69;&#x6c;</div></code></pre>


    <button id='5' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q mailbox</code></pre>


<h2 id="unexpected-behavior">Unexpected Behavior</h2>


<h3 class="question" id="q6">Question 6: The Mutation Mystery</h3>

<p>You just got a new job as the official code detective of UC Berkeley.
You just got your first assignment on the job! There have been 3 reported
cases of unusual list behavior from students who are writing python 
code for CS88. You're no python expert yet, but you've been studying up on the 
details of how python works. You're ready to investigate this mystery!</p>

<br>

<blockquote><p><strong>Case #1</strong></p>

<p>The first case was brought to you by Alice Listmaker. Alice created two 
identical lists, <code>x</code> and <code>y</code>. She then wanted to modify only <code>y</code>. 
However, she was surprised to see that <code>x</code> had been modified too! 
Use the command below to see what happened.</p></blockquote>

<pre><code> python3 ok &#x2d;q case1 &#x2d;u</code></pre>

<p>Hmm... what could have gone wrong here? Here are some clues that will 
help you figure this out:</p>

<ol>
  <li><a href="http://tinyurl.com/jzcyllh">This environment diagram</a></li>
  <li>Slicing, such as <code>x[:]</code>, creates a new list.</li>
  <li>The list function, <code>list(x)</code>, creates a new list.</li>
</ol>

<p>You think you have found a fix using slicing and the list function.
Use the command below to confirm that you have solved the mystery!</p>

<pre><code> python3 ok &#x2d;q case1_solved &#x2d;u</code></pre>

<br>

<blockquote><p><strong>Case #2</strong></p>

<p>The second report of unusual list behavior came from Alice's cousin, Bob Listmaker.
Unlike Alice, Bob knew about slicing and the list function. However, he was
still a victim of mutation. Let's take a look at what
happened to Bob's lists using the command below.</p></blockquote>

<pre><code> python3 ok &#x2d;q case2 &#x2d;u</code></pre>

<p>Here are some clues as to what caused this error:</p>

<ol>
  <li>Slicing and the list function do create new lists, but 
  do not deep copy the values.</li>
  <li><a href="http://tinyurl.com/jasot7o">This environment diagram</a></li>
  <li><a href="http://www.python-course.eu/deep_copy.php">This article on shallow vs. deep copy</a></li>
</ol>

<p>You have figured out that Bob needs to perform a deep copy on his lists.
You decide to write a <code>deep_copy</code> function for Bob to use. Fill in the 
body of the function. Do NOT use the copy module shown in the
article, you need to write your own function!</p>



<pre><code>def deep_copy(lst):
    &quot;&quot;&quot;Returns a new list that is a deep copy of lst.
    &gt;&gt;&gt; x = [[0, &#x27;a&#x27;],  [1, &#x27;b&#x27;], [2, &#x27;c&#x27;]]
    &gt;&gt;&gt; y = deep_copy(x)
    &gt;&gt;&gt; y[0][1] = &#x27;z&#x27;
    &gt;&gt;&gt; y
    [[0, &#x27;z&#x27;], [1, &#x27;b&#x27;], [2, &#x27;c&#x27;]]
    &gt;&gt;&gt; x
    [[0, &#x27;a&#x27;], [1, &#x27;b&#x27;], [2, &#x27;c&#x27;]]
    &gt;&gt;&gt; x = [[0, &#x27;a&#x27;],  [1, &#x27;b&#x27;], [2, &#x27;c&#x27;]]
    &gt;&gt;&gt; z = deep_copy(x)
    &gt;&gt;&gt; z[0][1] = &#x27;z&#x27;
    &gt;&gt;&gt; z
    [[0, &#x27;z&#x27;], [1, &#x27;b&#x27;], [2, &#x27;c&#x27;]]
    &gt;&gt;&gt; x       #x should not change
    [[0, &#x27;a&#x27;], [1, &#x27;b&#x27;], [2, &#x27;c&#x27;]]
    &quot;&quot;&quot;
<div class="alt 6">    "*** YOUR CODE HERE ***"
</div><div class="solution 6">&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x5b;&#x65;&#x6c;&#x65;&#x6d;&#x20;&#x69;&#x66;&#x20;&#x6e;&#x6f;&#x74;&#x20;&#x69;&#x73;&#x69;&#x6e;&#x73;&#x74;&#x61;&#x6e;&#x63;&#x65;&#x28;&#x65;&#x6c;&#x65;&#x6d;&#x2c;&#x20;&#x6c;&#x69;&#x73;&#x74;&#x29;&#x20;&#x65;&#x6c;&#x73;&#x65;&#x20;&#x64;&#x65;&#x65;&#x70;&#x5f;&#x63;&#x6f;&#x70;&#x79;&#x28;&#x65;&#x6c;&#x65;&#x6d;&#x29;&#x20;&#x66;&#x6f;&#x72;&#x20;&#x65;&#x6c;&#x65;&#x6d;&#x20;&#x69;&#x6e;&#x20;&#x6c;&#x73;&#x74;&#x5d;</div></code></pre>


    <button id='6' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q deep_copy</code></pre>

<br>

<blockquote><p><strong>Case #3</strong></p>

<p>After solving those first two cases, you're ready to tackle the final challenge.
This case was brought to you by Eve (she doesn't have a list-related last name, sorry).
Eve knew that she was not properly deep copying her lists. However, she could not 
figure out why this only caused problems some of the time. Let's investigate 
further.</p></blockquote>

<pre><code> python3 ok &#x2d;q case3 &#x2d;u</code></pre>

<p>Your final clues:</p>

<ol>
  <li><a href="http://tinyurl.com/zmrwvoj">This environment diagram</a></li>
  <li>Lists contain pointers to other lists.</li>
  <li>There are no pointers to strings or numbers, the values are stored directly.</li>
</ol>

<p><strong>Congratulations, you have solved the mutation mystery!</strong></p>

<br>

<blockquote><p><strong>Additional unusual list behavior</strong></p>

<ol>
  <li>Adding elements to a list using <code>+</code> creates a new list.</li>
  <li>Adding elements to a list using <code>+=</code> does not create a new list.</li>
  <li>Adding elements to a list using <code>.append()</code> does not create a new list.</li>
</ol>

<p>Take a look at <a href="http://tinyurl.com/hzb6vz8">this environment diagram</a> to see an example of this.
Pay close attention to the difference between using <code>+</code> and <code>+=</code> in the 
example with <code>y</code> and <code>z</code>.</p></blockquote>

  </div>

  <div class='col-md-3'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="#lambda-review">Lambda Review</a></li>
  <ul>
  <li><a href="#q1">Question 1: Compose</a></li>
  <li><a href="#q2">Question 2: Lambdas and Currying</a></li>
</ul>

  <li><a href="#introduction-to-mutation">Introduction to Mutation</a></li>
  <ul>
  <li><a href="#q3">Question 3: Map</a></li>
  <li><a href="#q4">Question 4: reverse-todo</a></li>
</ul>

  <li><a href="#mutation-and-adt-s">Mutation and ADT's</a></li>
  <ul>
  <li><a href="#q5">Question 5: Mailbox</a></li>
</ul>

  <li><a href="#unexpected-behavior">Unexpected Behavior</a></li>
  <ul>
  <li><a href="#q6">Question 6: The Mutation Mystery</a></li>
</ul>

</ul>

    </nav>
  </div>

</div>
    </div>
    <script src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>
    <script src="/fa19/assets/js/bootstrap.min.js"></script>
    <!-- TODO: Move to specific pages... -->
    <script src="/fa19/assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script>
  $('.sidebar ul').addClass('nav nav-stacked');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });
</script>
<!-- <script src="//code.jquery.com/jquery-latest.js"></script> -->
<!-- <script>
  $(function() {
    if (new Date("3/31/2019") < new Date()) {
      $('.toggleButton').css('display', 'inline-block');
      $('.toggleButton').click(function() {
        var solution_id = $(this).attr('id');
        $('div.' + solution_id).slideToggle(600);
      });
    }
    // Always display these toggle buttons
    $('.toggleButtonShow').click(function() {
      var solution_id = $(this).attr('id');
      $('div.' + solution_id).slideToggle(600);
    });
  });
</script> -->
  </body>
</html>
