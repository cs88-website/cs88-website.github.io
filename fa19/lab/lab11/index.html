<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content ="CS88: Computational Structures in Data Science" />
    <meta name="keywords" content ="CS88, Computer Science, Data Science, Programming, Berkeley, EECS" />
    <meta name="author" content ="Michael Ball, Amir Shahatit, Alex Kassil, Lyric Yu, Julia Yu, Srinath Goli, Sophia Qin, Brian Mi, Alec Kan, John Yang" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="/fa19/assets/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/fa19/assets/css/style.css">
    <link rel="icon" href="/fa19/assets/images/favicon.ico">
    <link rel="stylesheet" href="/fa19/assets/css/mono-blue.css">

    <link rel="stylesheet" type="text/css" href="/fa19/assets/css/resource.css" />
<link rel="stylesheet" type="text/css" href="/fa19/assets/css/lab.css" />


    <title>Lab 11: Exceptions, Iterators/Generators, and SQL | CS 88 Fall 2019</title>

  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section" aria-label="Toggle Nav Menu" aria-expanded="false">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/fa19/">CS 88</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/fa19/">Calendar</a></li>
            <li><a href="/fa19/articles/resources.html">Resources</a></li>
            <li><a href="/fa19/weekly-schedule.html">Weekly Schedule</a></li>
            <li><a href="/fa19/articles/about.html">Course Information</a></li>
            <li><a href="/fa19/staff.html">Staff</a></li>
            <!--- <li><a href="/fa19/tutoring.html">Tutoring</a></li> -->
          </ul>
        </div>
      </div>
    </nav>

    <div id="content" class="container">
      <div class='row'>
  <div class='col-md-9'>
    <div class='page-header'>
      <h1><span class="content-title-brand">Lab 11</span>: Exceptions, Iterators/Generators, and SQL</h1>
    </div>

    <p><i>Due at 11:59:59 pm on Tuesday, 12/10/2019.</i></p>


<h2 id='starter-files'>Starter Files</h2>

<p>Download <a href="lab11.zip">lab11.zip</a>.
Inside the archive, you will find starter files for the questions in this lab,
  along with a copy of the OK autograder.</p>

<h2 id='submission'>Submission</h2>

<p>By the end of this lab, you should have submitted the lab with <code>python3 ok --submit</code>. You may submit more than once before the deadline; only the final submission will be graded. Check that you have successfully submitted your code on <a href="https://okpy.org">okpy.org</a>. See <a href="https://cs61a.org/articles/using-ok.html">this article</a> for more instructions on okpy and submitting assignments.</p>

    


<h2 id="exceptions">Exceptions</h2>


<p>Exceptions allow us to try a chunk of code, and then catch any errors
that might come up. If we do catch an exception, we can run an
alternative set of instructions. This construct is very useful in many
situations.</p>

<pre><code>try:
    &lt;try suite&gt;
except Exception as e:
    &lt;except suite&gt;
else:
    &lt;else suite&gt;
finally:
    &lt;finally suite&gt;</code></pre>

<p>Notice that we can catch the exception as <code>e</code>. This binds the name <code>e</code> to
the exception object.  This can be helpful when we want to give extra
information on what happened. For example, we can <code>print(e)</code> inside the
except clause.</p>

<p>Also, we have an optional else case. The else suite is executed if the
<code>try</code> suite finishes without any exceptions.</p>

<p>We also have an optional finally clause, which is always executed,
whether or not an exception is thrown. We generally don't need to use
the else and finally controls in this class.</p>

<p>When we write exception statements, we generally don't just use the
class Exception as above. Rather, we figure out the specific type of
exception that we want to handle, such as <code>TypeError</code> or
<code>ZeroDivisionError</code>. To figure out which type of exception you are trying
to handle, you can type purposely wrong things into the interpreter
(such as 'hi' + 5 or 1 / 0) and see what kind of exception Python spits
out.</p>


<h2 id="iterators">Iterators</h2>


<p>Remember the <code>for</code> loop?  (We really hope so.)  The object the <code>for</code> loop
iterates over must be an iterable! An <strong>iterable</strong> is a way of representing
explicit sequences (like lists or strings) as well as <em>implicit</em> sequences (like
the natural numbers <code>1, 2, 3, ...</code>).</p>

<pre><code>for elem in iterable:
    # do something</code></pre>

<p><code>for</code> loops only work with iterables. This means the object you want to use a
<code>for</code> loop on must implement the <strong>iterable interface</strong>.  To implement the
iterable interface, an object must define an <code>__iter__</code> method that returns an
object that implements the <strong>iterator interface</strong>.  To implement the iterator
interface, an object must define a <code>__next__</code> method to compute and return the
next element in the sequence. If the iterator exhausts the sequence, it raises
<code>StopIteration</code> to send a signal to indicate that it reaches the end.</p>

<p>An iterable object can create an arbitrary amount of iterator objects. In
addition, the iterators are independent of each other; in other words they can
have a different position in the sequence.</p>

<p>Here is a table summarizing the required methods of the <em>iterable</em> and 
<em>iterator</em> interfaces/protocols. Python also has more
<a href="https://docs.python.org/3/library/stdtypes.html#typeiter">documentation</a>
about <a href="https://docs.python.org/3/glossary.html#term-iterator">iterator</a> types.</p>

<div class = "table-responsive">
  <table class='table table-bordered'>
    <tr>
      <th>Iterable</th>
      <th>Iterator</th>
    </tr>
    <tr>
      <td><code>__iter__</code>: return a new iterator</td>
      <td><code>__iter__</code>: must return itself</td>
    </tr>
    <tr>
      <td align="center"></td>
      <td><code>__next__</code>: return the next element,
      or raise <code>StopIteration</code></td>
    </tr>
  </table>
</div>

<p>In Python, an iterator must also be an iterable. In other words, it must have a
<code>__iter__</code> method that returns itself (with the current state unaltered).</p>

<p><strong>Analogy</strong>: an iterable is like a book (one can flip through the
pages) and an iterator is a bookmark (saves the position and can locate
the next page).  Calling <code>__iter__</code> on a book gives you a new bookmark
independent of other bookmarks, but calling <code>__iter__</code> on a bookmark
gives you the bookmark itself, without changing its position at all.</p>

<p>Here is an example of a class definition for an object that implements
the iterator interface:</p>

<pre><code>class AnIterator:
    def __init__(self):
        self.current = 0

    def __next__(self):
        if self.current &gt; 5:
            raise StopIteration
        self.current += 1
        return self.current

    def __iter__(self):
        return self</code></pre>

<p>Let's go ahead and try out our new toy.</p>

<pre><code>&gt;&gt;&gt; for num in AnIterator():
...     print(num)
1
2
3
4
5
6</code></pre>

<p>This is somewhat equivalent to running:</p>

<pre><code>t = AnIterator()
t = iter(t) # iter(t) is the same as t.__iter__()
try:
    while True:
        # next(t) is the same as t.__next__()
        print(next(t))
except StopIteration as e:
    pass</code></pre>

<h3 class="question" id="q1">Question 1</h3>

<p>Implement an iterator class called <code>ScaleIterator</code> that scales elements in an
iterable <code>s</code> by a number <code>k</code>.</p>



<pre><code>class ScaleIterator:
    &quot;&quot;&quot;An iterator the scales elements of the iterable s by a number k.

    &gt;&gt;&gt; s = ScaleIterator([1, 5, 2], 5)
    &gt;&gt;&gt; list(s)
    [5, 25, 10]

    &gt;&gt;&gt; m = ScaleIterator(naturals(), 2)
    &gt;&gt;&gt; [next(m) for _ in range(5)]
    [2, 4, 6, 8, 10]
    &quot;&quot;&quot;
    def __init__(self, s, k):
<div class="alt 1">        "*** YOUR CODE HERE ***"
</div><div class="solution 1">&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x73;&#x65;&#x6c;&#x66;&#x2e;&#x73;&#x20;&#x3d;&#x20;&#x69;&#x74;&#x65;&#x72;&#x28;&#x73;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x73;&#x65;&#x6c;&#x66;&#x2e;&#x6b;&#x20;&#x3d;&#x20;&#x6b;</div>
    def __iter__(self):
        return self

    def __next__(self):
<div class="alt 1">        "*** YOUR CODE HERE ***"
</div><div class="solution 1">&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x6e;&#x65;&#x78;&#x74;&#x28;&#x73;&#x65;&#x6c;&#x66;&#x2e;&#x73;&#x29;&#x20;&#x2a;&#x20;&#x73;&#x65;&#x6c;&#x66;&#x2e;&#x6b;</div></code></pre>


    <button id='1' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q ScaleIterator</code></pre>


<h2 id="generators">Generators</h2>


<p>A generator function returns a special type of <strong>iterator</strong> called
a <strong>generator</strong> object. Such functions can be written using a <code>yield</code>
statement:</p>

<pre><code>def &lt;generator_fn_name&gt;():
    &lt;somevariable&gt; = &lt;something&gt;
    while &lt;predicate&gt;:
        yield &lt;something&gt;
        &lt;increment somevariable&gt;</code></pre>

<p>Calling a generator function (a function with a yield statement in it)
makes it return a generator object rather than executing the body of
the function.</p>

<p>The reason we say a generator object is  a special type of <strong>iterator</strong>
is that it has all the properties of an iterator, meaning that:</p>

<ul>
  <li>Calling the <code>__iter__</code> method makes a generator object return
  itself without modifying its current state.</li>
  <li>Calling the <code>__next__</code> method makes a generator object compute and
  return the next object in its sequence. If the sequence is
  exhausted, <code>StopIteration</code> is raised.</li>
  <li>Typically, a generator should not restart unless it's defined that way. But
  calling the generator function returns a brand new generator object (like
  calling <code>__iter__</code> on an iterable object).</li>
</ul>

<p>However, they do have some fundamental differences:</p>

<ul>
  <li>An iterator is a class with <code>__next__</code> and <code>__iter__</code> explicitly defined, but
  a generator can be written as a mere function with a <code>yield</code> in it.</li>
  <li><code>__iter__</code> in an iterator uses <code>return</code>, but a generator uses <code>yield</code>.</li>
  <li><p>A generator "remembers" its state for the next <code>__next__</code> call. Therefore, the
  first <code>__next__</code> call works like this:</p>

  <ol>
    <li>Enter the function, run until the line with <code>yield</code>.</li>
    <li>Return the value in the <code>yield</code> statement, but remember the state of the
    function for future <code>__next__</code> calls.</li>
  </ol>

  <p>And subsequent <code>__next__</code> calls work like this:</p>

  <ol>
    <li>Re-enter the function, start at <strong>the line after <code>yield</code></strong>, and run until
    the next <code>yield</code> statement.</li>
    <li>Return the value in the <code>yield</code> statement, but remember the state of the
    function for future <code>__next__</code> calls.</li>
  </ol></li>
</ul>

<blockquote><p>Use OK to test your knowledge with the following What would Python print
questions:</p>

<pre><code>python3 ok &#x2d;q generators &#x2d;u &#x2d;&#x2d;local</code></pre></blockquote>

<pre><code>def generator():
    print(&quot;Starting here&quot;)
    i = 0
    while i &lt; 6:
        print(&quot;Before yield&quot;)
        yield i
        print(&quot;After yield&quot;)
        i += 1</code></pre>


    <pre><code>&gt;&gt;&gt; g = generator()
&gt;&gt;&gt; g # what type of object is this?
<div class="alt 7">______</div><div class="solution 7">&#x3c;&#x67;&#x65;&#x6e;&#x65;&#x72;&#x61;&#x74;&#x6f;&#x72;&#x20;&#x6f;&#x62;&#x6a;&#x65;&#x63;&#x74;&#x20;&#x2e;&#x2e;&#x2e;&#x3e;</div>
&gt;&gt;&gt; g == iter(g) # equivalent of g.__iter__()
<div class="alt 7">______</div><div class="solution 7">&#x54;&#x72;&#x75;&#x65;</div>
&gt;&gt;&gt; next(g) # equivalent of g.__next__()
<div class="alt 7">______</div><div class="solution 7">&#x53;&#x74;&#x61;&#x72;&#x74;&#x69;&#x6e;&#x67;&#x20;&#x68;&#x65;&#x72;&#x65;&#xa;&#x42;&#x65;&#x66;&#x6f;&#x72;&#x65;&#x20;&#x79;&#x69;&#x65;&#x6c;&#x64;&#xa;&#x30;</div>
&gt;&gt;&gt; next(g)
<div class="alt 7">______</div><div class="solution 7">&#x41;&#x66;&#x74;&#x65;&#x72;&#x20;&#x79;&#x69;&#x65;&#x6c;&#x64;&#xa;&#x42;&#x65;&#x66;&#x6f;&#x72;&#x65;&#x20;&#x79;&#x69;&#x65;&#x6c;&#x64;&#xa;&#x31;</div>
&gt;&gt;&gt; next(g)
<div class="alt 7">______</div><div class="solution 7">&#x41;&#x66;&#x74;&#x65;&#x72;&#x20;&#x79;&#x69;&#x65;&#x6c;&#x64;&#xa;&#x42;&#x65;&#x66;&#x6f;&#x72;&#x65;&#x20;&#x79;&#x69;&#x65;&#x6c;&#x64;&#xa;&#x32;</div></code></pre>

    <button id='7' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Trace through the code and make sure you know where and why each
statement is printed.</p>

<p>You might have noticed from the Iterators section that <code>IteratorB</code>, which didn't
define a <code>__next__</code> method, failed to run in the <code>for</code> loop.  However, this is
not always the case.</p>

<pre><code>class IterGen:
    def __init__(self):
        self.start = 5

    def __iter__(self):
        while self.start &lt; 10:
            self.start += 1
            yield self.start

for i in IterGen():
    print(i)</code></pre>

<p>Why does this iterable work without defining a <code>__next__</code> method?</p>

<p>The <code>for</code> loop only expects the object returned by <code>__iter__</code> to have a
<code>__next__</code> method. The <code>__iter__</code> method is a generator function because of the
<code>yield</code> statement in the body. Therefore, when <code>__iter__</code> is called, it returns
a generator object, which you can call <code>__next__</code> on.</p>

<h3 class="question" id="q2">Question 2: Scale</h3>

<p>Implement the generator function <code>scale(s, k)</code>, which yields elements of the
given iterable <code>s</code>, scaled by <code>k</code>.</p>



<pre><code>def scale(s, k):
    &quot;&quot;&quot;Yield elements of the iterable s scaled by a number k.

    &gt;&gt;&gt; s = scale([1, 5, 2], 5)
    &gt;&gt;&gt; type(s)
    &lt;class &#x27;generator&#x27;&gt;
    &gt;&gt;&gt; list(s)
    [5, 25, 10]

    &gt;&gt;&gt; m = scale(naturals(), 2)
    &gt;&gt;&gt; [next(m) for _ in range(5)]
    [2, 4, 6, 8, 10]
    &quot;&quot;&quot;
<div class="alt 2">    "*** YOUR CODE HERE ***"
</div><div class="solution 2">&#x20;&#x20;&#x20;&#x20;&#x66;&#x6f;&#x72;&#x20;&#x65;&#x6c;&#x65;&#x6d;&#x20;&#x69;&#x6e;&#x20;&#x73;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x79;&#x69;&#x65;&#x6c;&#x64;&#x20;&#x65;&#x6c;&#x65;&#x6d;&#x20;&#x2a;&#x20;&#x6b;</div></code></pre>


    <button id='2' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q scale</code></pre>


<h2 id="sql">SQL</h2>



<h2 id="setup">Setup</h2>


<p>For this lab, you're going to move away from Datahub and onto your own
machines. You can complete this lab by either installing SQLite onto
your computer or use one of the computers in lab using your EECS login 
information. To find your EECS login information, you can visit the 
<a href="https://acropolis.cs.berkeley.edu/~account/webacct/">EECS instructional account site</a>.</p>

<p>The simplest way to start using SQLite is to download a precompiled
binary from the <a href="http://www.sqlite.org/download.html">SQLite website</a>.
The latest version of SQLite at the time of writing is 3.23.0, but you
can check for additional updates on the website.</p>


<h3 id="windows">Windows</h3>


<ol>
  <li>Visit the download page linked above and navigate to the section
  Precompiled Binaries for Windows. Click on the link
  <strong>sqlite-shell-win32-x86-*.zip</strong> to download the binary.</li>
  <li>Unzip the file. There should be a <code>sqlite3.exe</code> file in the
  directory after extraction.</li>
  <li><p>Navigate to the folder containing the <code>sqlite3.exe</code> file and check
  that the version is at least 3.8.3:</p>

<pre><code>$ cd path/to/sqlite
$ ./sqlite3 &#x2d;&#x2d;version
3.9.2 2015&#x2d;11&#x2d;02 18:31:15 bda77dda9697c463c3d0704014d51627fceee328</code></pre></li>
</ol>


<h3 id="mac-os-x-yosemite-10-10-or-el-capitan-10-11">Mac OS X Yosemite (10.10) or El Capitan (10.11)</h3>


<p>SQLite comes pre-installed. Check that you have a version that's greater than 3.8.3:</p>

<pre><code>    $ sqlite3
    SQLite version 3.8.5</code></pre>


<h3 id="mac-os-x-mavericks-10-9-or-older">Mac OS X Mavericks (10.9) or older</h3>


<p>SQLite comes pre-installed, but it is the wrong version.</p>

<ol>
  <li>Visit the download page linked above and navigate to the section
  <strong>Precompiled Binaries for Mac OS X (x86)</strong>. Click on
  the link <strong>sqlite-shell-osx-x86-*.zip</strong> to download the
  binary.</li>
  <li>Unzip the file. There should be a <code>sqlite3</code> file in the directory
  after extraction.</li>
  <li><p>Navigate to the folder containing the <code>sqlite3</code> file and check that
  the version is at least 3.8.3:</p>

<pre><code>$ cd path/to/sqlite
$ ./sqlite3 &#x2d;&#x2d;version
3.9.2 2015&#x2d;11&#x2d;02 18:31:15 bda77dda9697c463c3d0704014d51627fceee328</code></pre></li>
</ol>


<h3 id="ubuntu">Ubuntu</h3>


<p>The easiest way to use SQLite on Ubuntu is to install it straight from
the native repositories (the version will be slightly behind the most
recent release):</p>

<pre><code>$ sudo apt&#x2d;get install sqlite3
$ sqlite3 &#x2d;&#x2d;version
3.8.6 2014&#x2d;08&#x2d;15 11:46:33 9491ba7d738528f168657adb43a198238abde19e</code></pre>


<h2 id="usage">Usage</h2>


<blockquote><p><em>Note:</em> If you downloaded a precompiled binary above, make sure that
the <code>sqlite3.exe</code> file is in the same directory as your <code>.sql</code> file.
(Extract and move it out from the zip file you downloaded.)</p></blockquote>

<p>After writing your code in the <code>.sql</code> file, you can test and verify
your output on the terminal with one of the two following
commands.</p>

<p>1.) Runs your code and then exits SQLite immediately afterwards.</p>

<pre><code>    sqlite3 &lt; lab13.sql</code></pre>

<p>2.) Runs your code and keeps SQLite open for further commands, which
is similar to running Python code with the interactive <code>&#x2d;i</code> flag.
You can type <code>.help</code> to see some of the commands you can run.</p>

<pre><code>    sqlite3 &#x2d;&#x2d;init lab13.sql</code></pre>

<p>To exit out of SQLite after using the second command, you can hit
<code>Ctrl&#x2d;D</code> type <code>.exit</code> or <code>.quit</code>.</p>


<h2 id="sql-basics">SQL Basics</h2>



<h3 id="creating-tables">Creating Tables</h3>


<p>You can create SQL tables either from scratch or from existing tables.</p>

<p>The following statement creates a table by specifying column names and values
without referencing another table. Each <code>SELECT</code> clause specifies the values
for one row, and <code>UNION</code> is used to join rows together. The <code>AS</code> clauses give a
name to each column; it need not be repeated in subsequent rows after the
first.</p>

<pre><code>CREATE TABLE [table_name] AS
  SELECT [val1] AS [column1], [val2] AS [column2], ... UNION
  SELECT [val3]             , [val4]             , ... UNION
  SELECT [val5]             , [val6]             , ...;</code></pre>

<p>Let's say we want to make the following table called <code>big_game</code> which records
the scores for the Big Game each year. This table has three columns:
<code>berkeley</code>, <code>stanford</code>, and <code>year</code>.</p>

<p>We could do so with the following <code>CREATE TABLE</code> statement:</p>

<pre><code>CREATE TABLE big_game AS
  SELECT 30 AS berkeley, 7 AS stanford, 2002 AS year UNION
  SELECT 28,             16,            2003         UNION
  SELECT 17,             38,            2014;</code></pre>


<h3 id="selecting-from-tables">Selecting From Tables</h3>

<p>More commonly, we will create new tables by selecting specific columns that we
want from existing tables by using a <code>SELECT</code> statement as follows:</p>

<pre><code>SELECT [columns] FROM [tables] WHERE [condition] ORDER BY [columns] LIMIT [limit];</code></pre>

<p>Let's break down this statement:</p>

<ul>
  <li><code>SELECT [columns]</code> tells SQL that we want to include the given columns in our
  output table; <code>[columns]</code> is a comma-separated list of column names, and <code>*</code>
  can be used to select all columns</li>
  <li><code>FROM [table]</code> tells SQL that the columns we want to select are from the
  given table</li>
  <li><code>WHERE [condition]</code> filters the output table by only including rows whose
  values satisfy the given <code>[condition]</code>, a boolean expression</li>
  <li><code>ORDER BY [columns]</code> orders the rows in the output table by the given
  comma-separated list of columns</li>
  <li><code>LIMIT [limit]</code> limits the number of rows in the output table by the integer
  <code>[limit]</code></li>
</ul>

<blockquote><p><em>Note:</em> We capitalize SQL keywords purely because of style convention. It
makes queries much easier to read, though they will still work if you don't
capitalize keywords.</p></blockquote>

<p>Here are some examples:</p>

<p>Select all of Berkeley's scores from the <code>big_game</code> table, but only include
scores from years past 2002:</p>

<pre><code>sqlite&gt; SELECT berkeley FROM big_game WHERE year &gt; 2002;
28
17</code></pre>

<p>Select the scores for both schools in years that Berkeley won:</p>

<pre><code>sqlite&gt; SELECT berkeley, stanford FROM big_game WHERE berkeley &gt; stanford;
30|7
28|16</code></pre>

<p>Select the years that Stanford scored more than 15 points:</p>

<pre><code>sqlite&gt; SELECT year FROM big_game WHERE stanford &gt; 15;
2003
2014</code></pre>


<h3 id="sql-operators">SQL operators</h3>


<p>Expressions in the <code>SELECT</code>, <code>WHERE</code>, and <code>ORDER BY</code> clauses can contain
one or more of the following operators:</p>

<ul>
  <li>comparison operators: <code>=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>&lt;&gt;</code> or <code>!=</code> ("not equal")</li>
  <li>boolean operators: <code>AND</code>, <code>OR</code></li>
  <li>arithmetic operators: <code>+</code>, <code>&#x2d;</code>, <code>*</code>, <code>/</code></li>
  <li>concatenation operator: <code>||</code></li>
</ul>

<p>Here are some examples:</p>

<p>Output the ratio of Berkeley's score to Stanford's score each year:</p>

<pre><code>sqlite&gt; select berkeley * 1.0 / stanford from big_game;
0.447368421052632
1.75
4.28571428571429</code></pre>

<p>Output the sum of scores in years where both teams scored over 10 points:</p>

<pre><code>sqlite&gt; select berkeley + stanford from big_game where berkeley &gt; 10 and stanford &gt; 10;
55
44</code></pre>

<p>Output a table with a single column and single row containing the value "hello
world":</p>

<pre><code>sqlite&gt; SELECT &quot;hello&quot; || &quot; &quot; || &quot;world&quot;;
hello world</code></pre>


<h3 id="data">Data</h3>


<p>In each question below, you will define a new table based on the following
tables.</p>

<pre><code>create table parents as
  select &quot;abraham&quot; as parent, &quot;barack&quot; as child union
  select &quot;abraham&quot;          , &quot;clinton&quot;         union
  select &quot;delano&quot;           , &quot;herbert&quot;         union
  select &quot;fillmore&quot;         , &quot;abraham&quot;         union
  select &quot;fillmore&quot;         , &quot;delano&quot;          union
  select &quot;fillmore&quot;         , &quot;grover&quot;          union
  select &quot;eisenhower&quot;       , &quot;fillmore&quot;;

create table dogs as
  select &quot;abraham&quot; as name, &quot;long&quot; as fur, 26 as height union
  select &quot;barack&quot;         , &quot;short&quot;      , 52           union
  select &quot;clinton&quot;        , &quot;long&quot;       , 47           union
  select &quot;delano&quot;         , &quot;long&quot;       , 46           union
  select &quot;eisenhower&quot;     , &quot;short&quot;      , 35           union
  select &quot;fillmore&quot;       , &quot;curly&quot;      , 32           union
  select &quot;grover&quot;         , &quot;short&quot;      , 28           union
  select &quot;herbert&quot;        , &quot;curly&quot;      , 31;

create table sizes as
  select &quot;toy&quot; as size, 24 as min, 28 as max union
  select &quot;mini&quot;,        28,        35        union
  select &quot;medium&quot;,      35,        45        union
  select &quot;standard&quot;,    45,        60;</code></pre>

<p>Your tables should still perform correctly even if the values in these tables
change. For example, if you are asked to list all dogs with a name that starts
with h, you should write:</p>

<pre><code>select name from dogs where &quot;h&quot; &lt;= name and name &lt; &quot;i&quot;;</code></pre>

<p>Instead of assuming that the <code>dogs</code> table has only the data above and writing</p>

<pre><code>select &quot;herbert&quot;;</code></pre>

<p>The former query would still be correct if the name <code>grover</code> were changed to
<code>hoover</code> or a row was added with the name <code>harry</code>.</p>

<p>In the following questions, update <code>lab11.sql</code> with your
solution.</p>

<h3 class="question" id="q3">Question 3</h3>
Some people just love little dogs.  Create a <code>short_dogs</code> table with
three columns, <code>name</code>, <code>fur</code>, and <code>size</code>, containing the dogs of
height < 40 cm.



<pre><code>&#x2d;&#x2d; All short dogs
create table short_dogs as
<div class="alt 3">-- REPLACE THIS LINE
</div><div class="solution 3">&#x20;&#x20;&#x73;&#x65;&#x6c;&#x65;&#x63;&#x74;&#x20;&#x6e;&#x61;&#x6d;&#x65;&#x2c;&#x20;&#x66;&#x75;&#x72;&#x2c;&#x20;&#x68;&#x65;&#x69;&#x67;&#x68;&#x74;&#x20;&#x61;&#x73;&#x20;&#x73;&#x69;&#x7a;&#x65;&#x20;&#x66;&#x72;&#x6f;&#x6d;&#x20;&#x64;&#x6f;&#x67;&#x73;&#xa;&#x20;&#x20;&#x20;&#x20;&#x77;&#x68;&#x65;&#x72;&#x65;&#x20;&#x68;&#x65;&#x69;&#x67;&#x68;&#x74;&#x20;&#x3c;&#x20;&#x34;&#x30;&#x3b;</div></code></pre>


    <button id='3' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<pre><code>&#x2d;&#x2d; Example:
select name from short_dogs;
&#x2d;&#x2d; Expected output:
&#x2d;&#x2d;   abraham
&#x2d;&#x2d;   eisenhower
&#x2d;&#x2d;   fillmore
&#x2d;&#x2d;   grover
&#x2d;&#x2d;   herbert</code></pre>

<p>Test your solution with OK:</p>

<pre><code>python3 ok &#x2d;q short &#x2d;&#x2d;local</code></pre>

<h3 class="question" id="q4">Question 4</h3>
The Fédération Cynologique Internationale classifies a standard poodle as over
45 cm and up to 60 cm. The <code>sizes</code> table describes this and other such
classifications, where a dog must be over the <code>min</code> and less than or equal to
the <code>max</code> in height to qualify as a <code>size</code>.

<p>Create a <code>size_of_dogs</code> table with two columns, one for each dog's <code>name</code> and
another for its <code>size</code>.</p>



<pre><code>&#x2d;&#x2d; The size of each dog
create table size_of_dogs as
<div class="alt 4">-- REPLACE THIS LINE
</div><div class="solution 4">&#x20;&#x20;&#x73;&#x65;&#x6c;&#x65;&#x63;&#x74;&#x20;&#x6e;&#x61;&#x6d;&#x65;&#x2c;&#x20;&#x73;&#x69;&#x7a;&#x65;&#x20;&#x66;&#x72;&#x6f;&#x6d;&#x20;&#x64;&#x6f;&#x67;&#x73;&#x2c;&#x20;&#x73;&#x69;&#x7a;&#x65;&#x73;&#xa;&#x20;&#x20;&#x20;&#x20;&#x77;&#x68;&#x65;&#x72;&#x65;&#x20;&#x68;&#x65;&#x69;&#x67;&#x68;&#x74;&#x20;&#x3e;&#x20;&#x6d;&#x69;&#x6e;&#x20;&#x61;&#x6e;&#x64;&#x20;&#x68;&#x65;&#x69;&#x67;&#x68;&#x74;&#x20;&#x3c;&#x3d;&#x20;&#x6d;&#x61;&#x78;&#x3b;</div></code></pre>


    <button id='4' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<pre><code>&#x2d;&#x2d; Example:
select name from size_of_dogs where size=&quot;toy&quot; or size=&quot;mini&quot;;
&#x2d;&#x2d; Expected output:
&#x2d;&#x2d;   abraham
&#x2d;&#x2d;   eisenhower
&#x2d;&#x2d;   fillmore
&#x2d;&#x2d;   grover
&#x2d;&#x2d;   herbert</code></pre>

<p>Test your solution with OK:</p>

<pre><code>python3 ok &#x2d;q small &#x2d;&#x2d;local</code></pre>

<h3 class="question" id="q5">Question 5</h3>
Create a table <code>by_height</code> that has a column of the names of all dogs that have
a <code>parent</code>, ordered by the height of the parent from tallest parent to shortest
parent.



<pre><code>&#x2d;&#x2d; All dogs with parents ordered by decreasing height of their parent
create table by_height as
<div class="alt 5">-- REPLACE THIS LINE
</div><div class="solution 5">&#x20;&#x20;&#x73;&#x65;&#x6c;&#x65;&#x63;&#x74;&#x20;&#x63;&#x68;&#x69;&#x6c;&#x64;&#x20;&#x66;&#x72;&#x6f;&#x6d;&#x20;&#x70;&#x61;&#x72;&#x65;&#x6e;&#x74;&#x73;&#x2c;&#x20;&#x64;&#x6f;&#x67;&#x73;&#x20;&#x77;&#x68;&#x65;&#x72;&#x65;&#x20;&#x6e;&#x61;&#x6d;&#x65;&#x20;&#x3d;&#x20;&#x70;&#x61;&#x72;&#x65;&#x6e;&#x74;&#x20;&#x6f;&#x72;&#x64;&#x65;&#x72;&#x20;&#x62;&#x79;&#x20;&#x2d;&#x68;&#x65;&#x69;&#x67;&#x68;&#x74;&#x3b;</div></code></pre>


    <button id='5' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>For example, <code>fillmore</code> has a parent (<code>eisenhower</code>) with height 35, and so
should appear before <code>grover</code> who has a parent (<code>fillmore</code>) with height 32.
The names of dogs with parents of the same height should appear together in any
order. For example, <code>barack</code> and <code>clinton</code> should both appear at the end, but
either one can come before the other.</p>

<pre><code>&#x2d;&#x2d; Example:
select * from by_height;
&#x2d;&#x2d; Expected output:
&#x2d;&#x2d;   herbert
&#x2d;&#x2d;   fillmore
&#x2d;&#x2d;   abraham
&#x2d;&#x2d;   delano
&#x2d;&#x2d;   grover
&#x2d;&#x2d;   barack
&#x2d;&#x2d;   clinton</code></pre>

<p>Test your solution with OK:</p>

<pre><code>python3 ok &#x2d;q parent_height &#x2d;&#x2d;local</code></pre>

<h3 class="question" id="q6">Question 6</h3>

<p>Create a table <code>tallest</code> that includes the <code>height</code> and <code>name</code> of every dog
that shares the 10's digit of its <code>height</code> with at least one other dog and has
the highest 1's digit of all dogs that have the same 10's digit.</p>



<pre><code>&#x2d;&#x2d; Height and name of every dog that shares height 10&#x27;s digit  
&#x2d;&#x2d; with at least one other dog and has the highest 1&#x27;s digit of all dogs 
&#x2d;&#x2d; that have the same 10&#x27;s digit
create table tallest as
<div class="alt 6">-- REPLACE THIS LINE
</div><div class="solution 6">&#x20;&#x20;&#x73;&#x65;&#x6c;&#x65;&#x63;&#x74;&#x20;&#x6d;&#x61;&#x78;&#x28;&#x68;&#x65;&#x69;&#x67;&#x68;&#x74;&#x29;&#x2c;&#x20;&#x6e;&#x61;&#x6d;&#x65;&#x20;&#x66;&#x72;&#x6f;&#x6d;&#x20;&#x64;&#x6f;&#x67;&#x73;&#x20;&#x67;&#x72;&#x6f;&#x75;&#x70;&#x20;&#x62;&#x79;&#x20;&#x68;&#x65;&#x69;&#x67;&#x68;&#x74;&#x2f;&#x31;&#x30;&#x20;&#x68;&#x61;&#x76;&#x69;&#x6e;&#x67;&#x20;&#x63;&#x6f;&#x75;&#x6e;&#x74;&#x28;&#x2a;&#x29;&#x20;&#x3e;&#x20;&#x31;&#x3b;</div></code></pre>


    <button id='6' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<pre><code>&#x2d;&#x2d; Example:
select * from tallest;
&#x2d;&#x2d; Expected output:
&#x2d;&#x2d;   28|grover
&#x2d;&#x2d;   35|eisenhower
&#x2d;&#x2d;   47|clinton</code></pre>

<p><em>Explanation</em>: <code>grover</code> is the tallest 20-something dog. <code>eisenhower</code> is the
tallest 30-something dog. <code>clinton</code> is the tallest 40-something dog. <code>barack</code>
is not included because there are no other 50-something dogs.</p>

<p>Test your solution with OK:</p>

<pre><code>python3 ok &#x2d;q tallest &#x2d;&#x2d;local</code></pre>

  </div>

  <div class='col-md-3'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="#exceptions">Exceptions</a></li>
  <li><a href="#iterators">Iterators</a></li>
  <ul>
  <li><a href="#q1">Question 1</a></li>
</ul>

  <li><a href="#generators">Generators</a></li>
  <ul>
  <li><a href="#q2">Question 2: Scale</a></li>
</ul>

  <li><a href="#sql">SQL</a></li>
  <li><a href="#setup">Setup</a></li>
  <ul>
  <li><a href="#windows">Windows</a></li>
  <li><a href="#mac-os-x-yosemite-10-10-or-el-capitan-10-11">Mac OS X Yosemite (10.10) or El Capitan (10.11)</a></li>
  <li><a href="#mac-os-x-mavericks-10-9-or-older">Mac OS X Mavericks (10.9) or older</a></li>
  <li><a href="#ubuntu">Ubuntu</a></li>
</ul>

  <li><a href="#usage">Usage</a></li>
  <li><a href="#sql-basics">SQL Basics</a></li>
  <ul>
  <li><a href="#creating-tables">Creating Tables</a></li>
  <li><a href="#selecting-from-tables">Selecting From Tables</a></li>
  <li><a href="#sql-operators">SQL operators</a></li>
  <li><a href="#data">Data</a></li>
  <li><a href="#q3">Question 3</a></li>
  <li><a href="#q4">Question 4</a></li>
  <li><a href="#q5">Question 5</a></li>
  <li><a href="#q6">Question 6</a></li>
</ul>

</ul>

    </nav>
  </div>

</div>
    </div>
    <script src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>
    <script src="/fa19/assets/js/bootstrap.min.js"></script>
    <!-- TODO: Move to specific pages... -->
    <script src="/fa19/assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script>
  $('.sidebar ul').addClass('nav nav-stacked');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });
</script>
<!-- <script src="//code.jquery.com/jquery-latest.js"></script> -->
<!-- <script>
  $(function() {
    if (new Date("12/11/2019") < new Date()) {
      $('.toggleButton').css('display', 'inline-block');
      $('.toggleButton').click(function() {
        var solution_id = $(this).attr('id');
        $('div.' + solution_id).slideToggle(600);
      });
    }
    // Always display these toggle buttons
    $('.toggleButtonShow').click(function() {
      var solution_id = $(this).attr('id');
      $('div.' + solution_id).slideToggle(600);
    });
  });
</script> -->
  </body>
</html>
