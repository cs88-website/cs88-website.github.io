<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content ="CS88: Computational Structures in Data Science" />
    <meta name="keywords" content ="CS88, Computer Science, Data Science, Programming, Berkeley, EECS" />
    <meta name="author" content ="Michael Ball, Amir Shahatit, Alex Kassil, Lyric Yu, Julia Yu, Srinath Goli, Sophia Qin, Brian Mi, Alec Kan, John Yang" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="/fa19/assets/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/fa19/assets/css/style.css">
    <link rel="icon" href="/fa19/assets/images/favicon.ico">
    <link rel="stylesheet" href="/fa19/assets/css/mono-blue.css">

    <link rel="stylesheet" type="text/css" href="/fa19/assets/css/resource.css" />
<link rel="stylesheet" type="text/css" href="/fa19/assets/css/hw.css"/>


    <title>Homework 8 | CS 88 Fall 2019</title>

  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section" aria-label="Toggle Nav Menu" aria-expanded="false">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/fa19/">CS 88</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/fa19/">Calendar</a></li>
            <li><a href="/fa19/articles/resources.html">Resources</a></li>
            <li><a href="/fa19/weekly-schedule.html">Weekly Schedule</a></li>
            <li><a href="/fa19/articles/about.html">Course Information</a></li>
            <li><a href="/fa19/staff.html">Staff</a></li>
            <!--- <li><a href="/fa19/tutoring.html">Tutoring</a></li> -->
          </ul>
        </div>
      </div>
    </nav>

    <div id="content" class="container">
      <div class='row'>
  <div class='col-md-9'>
    <div class='page-header'>
      <h1><span class="content-title-brand">Homework 8</span></h1>
    </div>

    <p><i>Due at 11:59:59 pm on Thursday, 11/07/2019.</i></p>

<h2>Instructions</h2>

<p>Download <a href="hw08.zip"> hw08.zip</a>.
    Inside the archive, you will find starter files for the questions in this homework,
    along with a copy of the OK autograder.</p>

<p><strong>Submission:</strong> When you are done, submit with <code>python3 ok --submit</code>. You may submit more than once before the deadline; only the final submission will be scored. Check that you have successfully submitted your code on <a href="https://okpy.org">okpy.org</a>. See <a href="https://cs61a.org/articles/using-ok.html">this article</a> for more instructions on okpy and submitting assignments.</p>

<p><strong>Readings:</strong> This homework relies on following references:</p>

<ul>
  <li><a href="http://www.composingprograms.com/pages/24-mutable-data.html">Section 2.4</a></li>
</ul>

    


<h2 id="unexpected-behavior">Unexpected Behavior</h2>


<h3 class="question" id="q1">Question 1: The Mutation Mystery</h3>

<p>You just got a new job as the official code detective of UC Berkeley.
You just got your first assignment on the job! There have been 3 reported
cases of unusual list behavior from students who are writing python 
code for CS88. You're no python expert yet, but you've been studying up on the 
details of how python works. You're ready to investigate this mystery!</p>

<br>

<blockquote><p><strong>Case #1</strong></p>

<p>The first case was brought to you by Alice Listmaker. Alice created two 
identical lists, <code>x</code> and <code>y</code>. She then wanted to modify only <code>y</code>. 
However, she was surprised to see that <code>x</code> had been modified too! 
Use the command below to see what happened.</p></blockquote>

<pre><code> python3 ok &#x2d;q case1 &#x2d;u</code></pre>

<p>Hmm... what could have gone wrong here? Here are some clues that will 
help you figure this out:</p>

<ol>
  <li><a href="http://tinyurl.com/jzcyllh">This environment diagram</a></li>
  <li>Slicing, such as <code>x[:]</code>, creates a new list.</li>
  <li>The list function, <code>list(x)</code>, creates a new list.</li>
</ol>

<p>You think you have found a fix using slicing and the list function.
Use the command below to confirm that you have solved the mystery!</p>

<pre><code> python3 ok &#x2d;q case1_solved &#x2d;u</code></pre>

<br>

<blockquote><p><strong>Case #2</strong></p>

<p>The second report of unusual list behavior came from Alice's cousin, Bob Listmaker.
Unlike Alice, Bob knew about slicing and the list function. However, he was
still a victim of mutation. Let's take a look at what
happened to Bob's lists using the command below.</p></blockquote>

<pre><code> python3 ok &#x2d;q case2 &#x2d;u</code></pre>

<p>Here are some clues as to what caused this error:</p>

<ol>
  <li>Slicing and the list function do create new lists, but 
  do not deep copy the values.</li>
  <li><a href="http://tinyurl.com/jasot7o">This environment diagram</a></li>
  <li><a href="http://www.python-course.eu/deep_copy.php">This article on shallow vs. deep copy</a></li>
</ol>

<p>You have figured out that Bob needs to perform a deep copy on his lists.
You decide to write a <code>deep_copy</code> function for Bob to use. Fill in the 
body of the function. Do NOT use the copy module shown in the
article, you need to write your own function!</p>

<solution>

<pre><code>def deep_copy(lst):
    &quot;&quot;&quot;Returns a new list that is a deep copy of lst.
    &gt;&gt;&gt; x = [[0, &#x27;a&#x27;],  [1, &#x27;b&#x27;], [2, &#x27;c&#x27;]]
    &gt;&gt;&gt; y = deep_copy(x)
    &gt;&gt;&gt; y[0][1] = &#x27;z&#x27;
    &gt;&gt;&gt; y
    [[0, &#x27;z&#x27;], [1, &#x27;b&#x27;], [2, &#x27;c&#x27;]]
    &gt;&gt;&gt; x
    [[0, &#x27;a&#x27;], [1, &#x27;b&#x27;], [2, &#x27;c&#x27;]]
    &gt;&gt;&gt; x = [[0, &#x27;a&#x27;],  [1, &#x27;b&#x27;], [2, &#x27;c&#x27;]]
    &gt;&gt;&gt; z = deep_copy(x)
    &gt;&gt;&gt; z[0][1] = &#x27;z&#x27;
    &gt;&gt;&gt; z
    [[0, &#x27;z&#x27;], [1, &#x27;b&#x27;], [2, &#x27;c&#x27;]]
    &gt;&gt;&gt; x       #x should not change
    [[0, &#x27;a&#x27;], [1, &#x27;b&#x27;], [2, &#x27;c&#x27;]]
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"</code></pre>

</solution>

<p>Use OK to test your code:</p><pre><code>python3 ok -q deep_copy</code></pre>

<br>

<blockquote><p><strong>Case #3</strong></p>

<p>After solving those first two cases, you're ready to tackle the final challenge.
This case was brought to you by Eve (she doesn't have a list-related last name, sorry).
Eve knew that she was not properly deep copying her lists. However, she could not 
figure out why this only caused problems some of the time. Let's investigate 
further.</p></blockquote>

<pre><code> python3 ok &#x2d;q case3 &#x2d;u</code></pre>

<p>Your final clues:</p>

<ol>
  <li><a href="http://tinyurl.com/zmrwvoj">This environment diagram</a></li>
  <li>Lists contain pointers to other lists.</li>
  <li>There are no pointers to strings or numbers, the values are stored directly.</li>
</ol>

<p><strong>Congratulations, you have solved the mutation mystery!</strong></p>

<br>

<blockquote><p><strong>Additional unusual list behavior</strong></p>

<ol>
  <li>Adding elements to a list using <code>+</code> creates a new list.</li>
  <li>Adding elements to a list using <code>+=</code> does not create a new list.</li>
  <li>Adding elements to a list using <code>.append()</code> does not create a new list.</li>
</ol>

<p>Take a look at <a href="http://tinyurl.com/hzb6vz8">this environment diagram</a> to see an example of this.
Pay close attention to the difference between using <code>+</code> and <code>+=</code> in the 
example with <code>y</code> and <code>z</code>.</p></blockquote>


<h2 id="dictionaries-and-mutation">Dictionaries and Mutation</h2>


<h3 class="question" id="q2">Question 2: Dictionary Cycle</h3>

<p>Build a function that takes in a dictionary. Each of the keys in the dictionary is mapped to a list. Build the function such that the dictionary is modified so that the key becomes the last item in the list, and the first item in the list becomes the new key.
<em>Hint</em>: You may find the method <code>dict.pop()</code> useful. Works similarly to <code>lst.pop()</code>!
<br/>

<solution></p>

<pre><code>def dict_cycle(dictionary):
    &quot;&quot;&quot;Write a function that cycles each of the key&#x2d;value pair such that the key becomes the last
        item in the value list, and the first item of the list becomes the new key. 

    &gt;&gt;&gt; hamster = {&quot;a&quot;:[&quot;b&quot;,&quot;c&quot;,&quot;d&quot;], &quot;w&quot;:[&quot;x&quot;,&quot;y&quot;,&quot;z&quot;]}
    &gt;&gt;&gt; dict_cycle(hamster)
    &gt;&gt;&gt; sorted(hamster.items()) # items return list of tuples that are key value pairs
    [(&#x27;b&#x27;, [&#x27;c&#x27;, &#x27;d&#x27;, &#x27;a&#x27;]), (&#x27;x&#x27;, [&#x27;y&#x27;, &#x27;z&#x27;, &#x27;w&#x27;])]
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
    </code></pre>

</solution>

<p>Use OK to test your code:</p><pre><code>python3 ok -q dict_cycle</code></pre>


<h2 id="mutation-and-adt-s">Mutation and ADT's</h2>


<h3 class="question" id="q3">Question 3: reverse-todo</h3>
We have a todo list ADT. So far it supports adding items and returning the whole list. Let's say our priorities changed and we want to complete our tasks in the reverse order of the list.

<p>Extend our todo list ADT by adding a function that reverses the todo list. Be sure to mutate the original list!</p>

<blockquote><p>This function should NOT return anything. This is to emphasize that this
function should utilize mutability.</p></blockquote>

<solution>

<pre><code>def todo():
    &quot;&quot;&quot;Returns add and reverse, which add to and reverse the list
    &gt;&gt;&gt; add, get_list, reverse = todo()
    &gt;&gt;&gt; add(&quot;clean&quot;)
    &gt;&gt;&gt; add(&quot;homework&quot;)
    &gt;&gt;&gt; add(&quot;cook&quot;)
    &gt;&gt;&gt; add(&quot;sleep&quot;)
    &gt;&gt;&gt; get_list()
    [&#x27;clean&#x27;, &#x27;homework&#x27;, &#x27;cook&#x27;, &#x27;sleep&#x27;]
    &gt;&gt;&gt; reverse()
    &gt;&gt;&gt; get_list()
    [&#x27;sleep&#x27;, &#x27;cook&#x27;, &#x27;homework&#x27;, &#x27;clean&#x27;]
    &gt;&gt;&gt; add(&quot;wake up&quot;)
    &gt;&gt;&gt; get_list()
    [&#x27;sleep&#x27;, &#x27;cook&#x27;, &#x27;homework&#x27;, &#x27;clean&#x27;, &#x27;wake up&#x27;]
    &gt;&gt;&gt; reverse()
    &gt;&gt;&gt; get_list()
    [&#x27;wake up&#x27;, &#x27;clean&#x27;, &#x27;homework&#x27;, &#x27;cook&#x27;, &#x27;sleep&#x27;]
    &quot;&quot;&quot;
    lst = []
    def get_list():
        return lst
    def add(item):
        lst.append(item)
    def reverse():
        "*** YOUR CODE HERE ***"
        
    return add, get_list, reverse</code></pre>

</solution>

<p>Use OK to test your code:</p><pre><code>python3 ok -q todo</code></pre>

<h3 class="question" id="q4">Question 4: Mailbox</h3>

<p>Mutation is crucial for ADTs.</p>

<p>Below, we can see the power of mutability which allows us to change the name and amount of money in <code>account_1</code>.</p>

<pre><code>&gt;&gt;&gt; account_1 = account(&quot;Sophia&quot;, 10)
&gt;&gt;&gt; get_account_name(account_1)
Sophia
&gt;&gt;&gt; change_account_name(account_1, &quot;Julia&quot;)
&gt;&gt;&gt; get_account_name(account_1)
Julia
&gt;&gt;&gt; deposit(account_1, 20)
&gt;&gt;&gt; get_account_savings(account_1)
30
&gt;&gt;&gt; withdraw(account_1, 10)
&gt;&gt;&gt; get_account_savings(account_1)
20</code></pre>

<p>Let's apply this concept to a new ADT: a mailbox. The mail box's internal representation is a dictionary that holds key value pairs corresponding to a person, and a list of their mail. Below is an example of a TA mailbox.</p>

<pre><code>{&quot;Sophia&quot;:[&quot;receipt&quot;, &quot;worksheets&quot;], &quot;Lyric&quot;:[&quot;worksheets&quot;, &quot;form&quot;, &quot;bills&quot;], &quot;Andrew&quot;:[&quot;paycheck&quot;], &quot;Julia&quot;:None, &quot;John&quot;:None, &quot;Amir&quot;:None}</code></pre>

<p>The <code>get_mail(name)</code> function, given a mailbox, should return the mail corresponding to the name argument given. The postman can also put in mail by using the <code>deliver_mail(name, mail)</code> function.</p>

<p>Please provide implementations for these functions. Make sure to mutate the dictionary! (You can assume mail will always be in a list.)</p>

<solution>

<pre><code>def mailbox():
    &quot;&quot;&quot;
    &gt;&gt;&gt; get_mail, deliver_mail = mailbox()
    &gt;&gt;&gt; get_mail(&quot;Sophia&quot;)
    &gt;&gt;&gt; deliver_mail(&quot;Sophia&quot;, [&quot;postcard&quot;])
    &gt;&gt;&gt; get_mail(&quot;Sophia&quot;)
    [&#x27;postcard&#x27;]
    &gt;&gt;&gt; get_mail(&quot;Sophia&quot;)
    &gt;&gt;&gt; deliver_mail(&quot;Lyric&quot;, [&quot;paycheck&quot;, &quot;ads&quot;])
    &gt;&gt;&gt; get_mail(&quot;Lyric&quot;)
    [&#x27;paycheck&#x27;, &#x27;ads&#x27;]
    &gt;&gt;&gt; deliver_mail(&quot;Lyric&quot;, [&quot;bills&quot;])
    &gt;&gt;&gt; get_mail(&quot;Lyric&quot;)
    [&#x27;bills&#x27;]
    &gt;&gt;&gt; deliver_mail(&quot;Julia&quot;, [&quot;survey&quot;])
    &gt;&gt;&gt; get_mail(&quot;Julia&quot;)
    [&#x27;survey&#x27;]
    &gt;&gt;&gt; get_mail(&quot;Julia&quot;)
    &gt;&gt;&gt; get_mail(&quot;Amir&quot;)
    &gt;&gt;&gt; deliver_mail(&quot;Amir&quot;, [&quot;postcard&quot;, &quot;paycheck&quot;])
    &gt;&gt;&gt; deliver_mail(&quot;Amir&quot;, [&quot;ads&quot;])
    &gt;&gt;&gt; get_mail(&quot;Amir&quot;)
    [&#x27;postcard&#x27;, &#x27;paycheck&#x27;, &#x27;ads&#x27;]
    &quot;&quot;&quot;
    mailbox = {}
    def get_mail(name):
        "*** YOUR CODE HERE ***"
        
    def deliver_mail(name, mail):
        "*** YOUR CODE HERE ***"
        
    return get_mail, deliver_mail</code></pre>

</solution>

<p>Use OK to test your code:</p><pre><code>python3 ok -q mailbox</code></pre>


<h2 id="optional">Optional</h2>


<h3 class="question" id="q5">Question 5: Pokemon</h3>

<p>Remember the good old days when we played Pokemon Go?
Complete the implementation of a Pokemon ADT below by filling out <code>add_pokemon</code>, <code>evolve</code>, and <code>evolve_all</code>.</p>

<solution>

<pre><code>def make_gym(a, b, c, d):
    &quot;&quot;&quot;Returns a pokemon gym (represented by list) of the four pokemons a, b, c, d.&quot;&quot;&quot;
    return [a, b, c, d]

def gym_size(gym):
    &quot;&quot;&quot;Returns the size of the gym.&quot;&quot;&quot;
    return len(gym)

def make_pokemon_set():
    &quot;&quot;&quot;Returns a dictionary of pokemon methods.

    &gt;&gt;&gt; my_pokemons = make_pokemon_set()
    &gt;&gt;&gt; my_pokemons[&quot;add&quot;](&quot;pikachu&quot;, &quot;raichu&quot;)
    &gt;&gt;&gt; my_pokemons[&quot;evolve&quot;](&quot;charmander&quot;)
    &#x27;charizard&#x27;
    &gt;&gt;&gt; my_pokemons[&quot;evolve&quot;](&quot;celebi&quot;)
    &#x27;celebi&#x27;
    &gt;&gt;&gt; my_gym = make_gym(&quot;charmander&quot;, &quot;celebi&quot;, &quot;pikachu&quot;, &quot;rattata&quot;)
    &gt;&gt;&gt; my_pokemons[&quot;evolve_all&quot;](my_gym)
    &gt;&gt;&gt; my_gym
    [&#x27;charizard&#x27;, &#x27;celebi&#x27;, &#x27;raichu&#x27;, &#x27;raticate&#x27;]

    &quot;&quot;&quot;
    pokemon_set = {&quot;charmander&quot;:&quot;charmeleon&quot;,
            &quot;charmeleon&quot;:&quot;charizard&quot;,
            &quot;squirtle&quot;:&quot;wartortle&quot;,
            &quot;wartortle&quot;:&quot;blastoise&quot;,
            &quot;rattata&quot;:&quot;raticate&quot;,
            &quot;sandshrew&quot;:&quot;sandslash&quot;}

    def add(pokemon, evolution):
        "*** YOUR CODE HERE ***"
        

    def evolve(pokemon):
        "*** YOUR CODE HERE ***"
        

    def evolve_all(gym):
        "*** YOUR CODE HERE ***"
        

    return {&quot;add&quot;:add, &quot;evolve&quot;:evolve, &quot;evolve_all&quot;:evolve_all}</code></pre>

</solution>

<p>Use OK to test your code:</p><pre><code>python3 ok -q make_pokemon_set</code></pre>


  </div>

  <div class='col-md-3'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="#unexpected-behavior">Unexpected Behavior</a></li>
  <ul>
  <li><a href="#q1">Question 1: The Mutation Mystery</a></li>
</ul>

  <li><a href="#dictionaries-and-mutation">Dictionaries and Mutation</a></li>
  <ul>
  <li><a href="#q2">Question 2: Dictionary Cycle</a></li>
</ul>

  <li><a href="#mutation-and-adt-s">Mutation and ADT's</a></li>
  <ul>
  <li><a href="#q3">Question 3: reverse-todo</a></li>
  <li><a href="#q4">Question 4: Mailbox</a></li>
</ul>

  <li><a href="#optional">Optional</a></li>
  <ul>
  <li><a href="#q5">Question 5: Pokemon</a></li>
</ul>

</ul>

    </nav>
  </div>

</div>
    </div>
    <script src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>
    <script src="/fa19/assets/js/bootstrap.min.js"></script>
    <!-- TODO: Move to specific pages... -->
    <script src="/fa19/assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script>
  $('.sidebar ul').addClass('nav nav-stacked');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });
</script>

  </body>
</html>
